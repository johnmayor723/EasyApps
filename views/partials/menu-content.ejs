
<div class="page">

  <!-- Header -->
  <div class="page-header">
    <h2>Menu Items</h2>
    <div class="actions">
      <button class="add-btn" onclick="toggleForm()">+ Add Menu</button>
    </div>
  </div>

  <!-- Card -->
   <!-- Card -->
  <div class="card">

    <% const tenant = session.tenant; %>
    
    <% if (!menu ) { %>
      <!-- EMPTY STATE -->
      <div class="menu-empty">
        <h3>No menu created yet</h3>
        <p>Your restaurant doesn‚Äôt have any menu items.</p>
       <button class="add-btn" onclick="toggleForm()">+ Add a Menu Item</button>

      </div>
    <% } else { %>
      <!-- Toolbar -->
      <div class="toolbar">
        <div class="search">
          üîç
          <input type="text" placeholder="Search by name, description, image_url" />
          <span class="info">‚ìò</span>
        </div>

        <button class="filter-btn">‚è∑ Filters</button>
      </div>

      <!-- Table -->
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>name</th>
              <th>description</th>
              <th>price</th>
              <th>category</th>
              <th>image_url</th>
              <th>is_vegetarian</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <!-- STATIC CONTENT -->
             <% menu.forEach(item => { %>
              <tr>
                <td><%= item.name %></td>
                <td><%= item.description %></td>
                <td><%= item.price %></td>
                <td><%= item.category %></td>
                <td>
                  <% if (item.image) { %>
                    <img 
                      src="<%= item.image %>" 
                      alt="<%= item.name %>" 
                      style="width:50px;height:50px;object-fit:cover;border-radius:6px;"
                    />
                  <% } else { %>
                    ‚Äî
                  <% } %>
                </td>
                <td><%= item.available ? 'true' : 'false' %></td>
                <td class="actions">
                 <button
                    type="button"
                    class="btn btn-edit"
                    onclick='openEditModal(<%- JSON.stringify(item) %>)'
                  >
                    Edit
                  </button>
                  <a href="/restaurant-management/menu/<%= item._id %>/delete" class="btn btn-delete">Delete</a>
                </td>
              </tr>
            <% }) %>
                      
          </tbody>
        </table>
      </div>
    <% } %>

  </div>
</div>

<!-- MODAL OVERLAY -->
<div class="modal-overlay" id="menuModal">

  <div class="modal-content">

    <button class="modal-close" onclick="toggleForm()">‚úï</button>

    <form  action="/restaurant-management/create-menu"
     enctype="multipart/form-data" method="POST" class="menu-form">

      <h3>Create Menu Item</h3>

      <div class="form-group">
        <label>Name</label>
        <input type="text" name="name" required />
      </div>

      <div class="form-group">
        <label>Description</label>
        <textarea name="description" rows="3" required></textarea>
      </div>

      <div class="form-group">
        <label>Category</label>
        <select name="category" required>
          <option value="" disabled selected>Select category</option>
          <option value="appetizers">Appetizers</option>
          <option value="soups">Soups</option>
          <option value="salads">Salads</option>
          <option value="main_courses">Main Courses</option>
          <option value="grills_bbq">Grills / BBQ</option>
          <option value="sides">Sides</option>
          <option value="pasta_noodles">Pasta & Noodles</option>
          <option value="rice_dishes">Rice Dishes</option>
          <option value="seafood">Seafood</option>
          <option value="vegetarian">Vegetarian</option>
          <option value="desserts">Desserts</option>
          <option value="beverages">Beverages</option>
          <option value="breakfast">Breakfast</option>
          <option value="kids_menu">Kids Menu</option>
        </select>
      </div>

      <div class="form-group">
        <label>Price</label>
        <input type="number" name="price" step="0.01" required />
      </div>

      <div class="form-group">
        <label>Available</label>
        <select name="available">
          <option value="true">Yes</option>
          <option value="false">No</option>
        </select>
      </div>

      <div class="form-group">
        <label>Image</label>
        <input type="file" name="image" accept="image/*" />
      </div>

      <input type="hidden" name="tenantId" value="<%= tenant.tenantId %>" />

      <button type="submit" class="add-btn">Save Menu</button>

    </form>

  </div>

</div>
<!-- EDIT MODAL -->
<div class="modal-overlay" id="editMenuModal">

  <div class="modal-content">

    <button class="modal-close" onclick="closeEditModal()">‚úï</button>

    <form
      method="POST"
      id="editMenuForm"
      enctype="multipart/form-data"
      class="menu-form"
    >

      <h3>Edit Menu Item</h3>

      <div class="form-group">
        <label>Name</label>
        <input type="text" name="name" id="edit_name" required />
      </div>

      <div class="form-group">
        <label>Description</label>
        <textarea name="description" id="edit_description" rows="3" required></textarea>
      </div>

      <div class="form-group">
        <label>Category</label>
        <select name="category" id="edit_category" required>
          <option value="appetizers">Appetizers</option>
          <option value="soups">Soups</option>
          <option value="salads">Salads</option>
          <option value="main_courses">Main Courses</option>
          <option value="grills_bbq">Grills / BBQ</option>
          <option value="sides">Sides</option>
          <option value="pasta_noodles">Pasta & Noodles</option>
          <option value="rice_dishes">Rice Dishes</option>
          <option value="seafood">Seafood</option>
          <option value="vegetarian">Vegetarian</option>
          <option value="desserts">Desserts</option>
          <option value="beverages">Beverages</option>
          <option value="breakfast">Breakfast</option>
          <option value="kids_menu">Kids Menu</option>
        </select>
      </div>

      <div class="form-group">
        <label>Price</label>
        <input type="number" name="price" id="edit_price" step="0.01" required />
      </div>

      <div class="form-group">
        <label>Status</label>
        <select name="available" id="edit_available">
          <option value="true">Available</option>
          <option value="false">Unavailable</option>
        </select>
      </div>

      <div class="form-group">
        <label>Current Image</label>
        <img id="edit_image_preview" style="width:80px;border-radius:6px;" />
      </div>

      <div class="form-group">
        <label>Change Image</label>
        <input type="file" name="image" />
      </div>

      <button type="submit" class="add-btn">Update Menu</button>

    </form>

  </div>

</div>


<style>

/* ===== Layout ===== */

.page {
  padding: 24px;
}
/* ===== MODAL OVERLAY ===== */

.modal-overlay {
 
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.45);
  backdrop-filter: blur(3px);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

/* Show modal */
.modal-overlay.active {
  display: flex;
}

/* Modal box */
.modal-content {
  margin-top: 100px;
  background: #fff;
  width: 100%;
  max-width: 600px;
  border-radius: 14px;
  padding: 30px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.15);
  position: relative;
  animation: fadeIn 0.2s ease-in-out;
}

/* Close button */
.modal-close {
  position: absolute;
  top: 15px;
  right: 15px;
  background: #ef4444;
  border: none;
  color: #fff;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 14px;
}

/* Animation */
@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.card {
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

/* ===== Empty State ===== */

.menu-empty {
  text-align: center;
  padding: 40px 20px;
}

/* ===== Table ===== */

.table-wrapper {
  overflow-x: auto;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  border: 1px solid #e5e7eb;
  padding: 12px;
  text-align: left;
  font-size: 14px;
}

thead th {
  background: #f9fafb;
  font-weight: 600;
}

tbody tr:nth-child(even) {
  background: #f9fafb;
}

tbody tr:hover {
  background: #eef2ff;
}

/* ===== Buttons ===== */

.add-btn {
  background: #111827;
  color: #fff;
  border: none;
  padding: 10px 16px;
  border-radius: 6px;
  cursor: pointer;
}

.btn-edit {
  background-color: #3b82f6;
  color: white;
  padding: 6px 10px;
  border-radius: 4px;
  text-decoration: none;
}

.btn-delete {
  background-color: #ef4444;
  color: white;
  padding: 6px 10px;
  border-radius: 4px;
  text-decoration: none;
}

/* ===== FORM CENTERING ===== */

.menu-form-container {
  margin-top: 40px;
  display:none ;
}

.menu-form {
  background: #fff;
  padding: 30px;
  border-radius: 12px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.06);
}

/* Desktop center */
@media (min-width: 1024px) {
  .menu-form {
    max-width: 600px;
    margin: 0 auto;
  }
}

/* Mobile full width */
@media (max-width: 1023px) {
  .menu-form {
    width: 100%;
  }
}

.form-group {
  display: flex;
  flex-direction: column;
  margin-bottom: 16px;
}

input, textarea, select {
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #d1d5db;
}

</style>

